{% extends 'base.html' %}

{% block title %}Delete Job - {{ job.title }} - HRMS Portal{% endblock %}

{% block page_title %}Delete Job{% endblock %}

{% block content %}
<!-- Hidden CSRF token for JavaScript -->
{% csrf_token %}

<!-- Page Header -->
<div class="page-header">
    <div>
        <h1 class="page-title">
            <i class="bi bi-trash text-danger"></i>
            Delete Job
        </h1>
        <p class="page-subtitle">Confirm job deletion</p>
    </div>
    <a href="{% url 'employees:job_detail' job.pk %}" class="btn btn-outline-secondary">
        <i class="bi bi-arrow-left me-2"></i>Back to Job
    </a>
</div>

<!-- Delete Confirmation -->
<div class="modern-card">
    <div class="modern-card-body">
        <div class="text-center mb-4">
            <div class="delete-icon mb-3">
                <i class="bi bi-exclamation-triangle text-warning"></i>
            </div>
            <h3 class="mb-3">Delete Job: {{ job.title }}</h3>
            <p class="text-muted mb-4">
                Are you sure you want to delete this job posting? This action cannot be undone and will permanently remove:
            </p>
        </div>

        <!-- Job Details -->
        <div class="alert alert-light border-start border-warning border-4 mb-4">
            <div class="row g-3">
                <div class="col-md-6">
                    <strong>Job Title:</strong> {{ job.title }}
                </div>
                <div class="col-md-6">
                    <strong>Department:</strong> {{ job.department.name }}
                </div>
                <div class="col-md-6">
                    <strong>Designation:</strong> {{ job.designation.name }}
                </div>
                <div class="col-md-6">
                    <strong>Location:</strong> {{ job.location }}
                </div>
                <div class="col-md-6">
                    <strong>Applications:</strong> {{ job.application_count|default:"0" }}
                </div>
                <div class="col-md-6">
                    <strong>Posted Date:</strong> {{ job.created_at|date:"M d, Y" }}
                </div>
            </div>
        </div>

        <!-- Warning Message -->
        <div class="alert alert-danger" role="alert">
            <div class="d-flex align-items-center">
                <i class="bi bi-exclamation-triangle-fill me-3"></i>
                <div>
                    <strong>Warning:</strong> This will permanently delete the job posting and all associated data. 
                    If candidates have applied, you may want to review applications before deletion.
                </div>
            </div>
        </div>

        <!-- Delete Form -->
        <form method="post" class="text-center">
            {% csrf_token %}
            <div class="d-flex justify-content-center gap-2">
                <a href="{% url 'employees:job_detail' job.pk %}" class="btn btn-outline-secondary">
                    <i class="bi bi-x-circle me-2"></i>Cancel
                </a>
                <button type="submit" class="btn btn-danger">
                    <i class="bi bi-trash me-2"></i>Yes, Delete Job
                </button>
            </div>
        </form>
    </div>
</div>

<style>
.delete-icon {
    font-size: 4rem;
    color: #ffc107;
}

.delete-icon i {
    font-size: 4rem;
}

.alert-light {
    background-color: #f8f9fa;
    border-color: #dee2e6;
}

.border-start.border-warning.border-4 {
    border-left-width: 4px !important;
}
</style>
{% endblock %}
